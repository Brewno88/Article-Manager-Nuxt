(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{377:function(e,t,r){"use strict";r.r(t);var l={name:"AddArticlePage",data:function(){var e=this;return{article:{},deleteBtn:!0,errorMessage:"",valid:!1,textValid:[function(e){return e&&e.length>0||"This filed is required!"}],fileValid:[function(t){if(!t&&void 0!==e.article.image)return"This field is required!";if(t){if(t.size>=5e6)return"Image size must be less than 5MB";if(t.size<=5e6)return!0}return!0}],descValid:[function(e){return e&&e.length<=300||(e&&e.length>=300?"Description must be less than 300 chars":"This field is required!")}],titleValid:[function(e){return e&&e.length<=100||(e&&e.length>=100?"Title must be less than 100 chars":"This field is required!")}]}},layout:"navigation",mounted:function(){this.article=JSON.parse(localStorage.getItem("articles"))[this.$nuxt.$route.params.id]},methods:{updateArticle:function(){var e={};(e=JSON.parse(localStorage.getItem("articles")))[this.$nuxt.$route.params.id]=this.article,localStorage.setItem("articles",JSON.stringify(e)),window.location.href=window.location.origin},deleteArticle:function(){this.deleteBtn=!1;var e={};(e=JSON.parse(localStorage.getItem("articles"))).splice(e[this.$nuxt.$route.params.id],1),localStorage.setItem("articles",JSON.stringify(e)),window.location.href=window.location.origin},onFileChange:function(e){e&&this.createImage(e)},createImage:function(e){var t=this,r=new FileReader;if(e.size<5e6){try{r.onload=function(e){t.article.image=e.target.result}}catch(e){this.errorMessage=e}r.readAsDataURL(e)}else this.image=""},removeImage:function(e){this.article.image="",this.$refs.imageInput.reset()}},head:function(){return{title:"Add Article"}}},n=r(28),o=r(37),c=r.n(o),d=r(378),m=r(272),v=r(360),f=r(365),h=r(366),x=r(175),_=r(282),w=r(367),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xl":""}},[r("v-form",{ref:"addArticleForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("p",[e._v("Date: "+e._s(e.article.date))]),e._v(" "),r("p",[e._v("Author: "+e._s(e.article.author))]),e._v(" "),r("v-file-input",{ref:"imageInput",attrs:{label:"Add New Image for Thumbnail","show-size":"",rules:e.fileValid,accept:"image/*"},on:{change:e.onFileChange}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.article.image,expression:"article.image"}]},[r("v-btn",{attrs:{color:"error"},on:{click:e.removeImage}},[e._v("Remove File")]),e._v(" "),r("v-img",{attrs:{src:e.article.image,"aspect-ratio":"2.1"}})],1),e._v(" "),r("v-text-field",{attrs:{id:"id",name:"title",label:"Title",rules:e.titleValid},model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}}),e._v(" "),r("v-text-field",{attrs:{name:"description",label:"Description",rules:e.descValid},model:{value:e.article.description,callback:function(t){e.$set(e.article,"description",t)},expression:"article.description"}}),e._v(" "),r("v-textarea",{attrs:{name:"text",label:"Article Text",rules:e.textValid},model:{value:e.article.text,callback:function(t){e.$set(e.article,"text",t)},expression:"article.text"}})],1),e._v(" "),r("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:e.updateArticle}},[e._v("Update Article")]),e._v(" "),r("v-btn",{attrs:{disabled:!e.deleteBtn,color:"error"},on:{click:e.deleteArticle}},[e._v("Delete Article")]),e._v(" "),e.errorMessage.includes("exceeded the quota")?r("v-alert",{staticStyle:{position:"fixed",bottom:"1rem"},attrs:{type:"error",elevation:"5"}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e.deleteBtn?e._e():r("v-alert",{staticStyle:{position:"fixed",left:"50%",bottom:"50%",transform:"translateX(-50%)"},attrs:{type:"error",elevation:"5",prominent:""}},[e._v("\n    Article Deleted! Redirecting to Homepage...\n  ")])],1)}),[],!1,null,"a49f176a",null);t.default=component.exports;c()(component,{VAlert:d.a,VBtn:m.a,VContainer:v.a,VFileInput:f.a,VForm:h.a,VImg:x.a,VTextField:_.a,VTextarea:w.a})}}]);