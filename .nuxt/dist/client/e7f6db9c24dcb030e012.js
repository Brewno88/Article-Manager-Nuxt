(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{375:function(e,t,r){"use strict";r.r(t);r(21);var l={name:"AddArticlePage",data:function(){return{article:{id:0,author:this.$nuxt.$auth.user.email,date:"",title:"",description:"",likes:0,image:"",imageFileName:"",text:""},errorMessage:"",valid:!1,required:[function(e){return e&&e.length>0||"This filed is required!"}],checkFile:[function(e){return e&&e.size<=5e6||(e&&e.size>=5e6?"Needs to be less than 5MB":"This field is required!")}],descLength:[function(e){return e&&e.length<=300||(e&&e.length>=300?"Description must be less than 300 chars":"This field is required!")}],titleLength:[function(e){return e&&e.length<=100||(e&&e.length>=100?"Title must be less than 100 chars":"This field is required!")}]}},layout:"navigation",mounted:function(){this.article.id=Math.ceil(1e7*Math.random()),this.article.date="".concat((new Date).getDate(),"/").concat((new Date).getMonth(),"/").concat((new Date).getFullYear()," - ").concat((new Date).getHours(),":").concat((new Date).getMinutes())},methods:{storeArticle:function(){var e={};(e=JSON.parse(localStorage.getItem("articles"))).unshift(this.article);try{localStorage.setItem("articles",JSON.stringify(e)),this.article.image="",this.article.id=Math.ceil(1e7*Math.random()),this.$refs.addArticleForm.reset()}catch(e){this.errorMessage=e.message}window.location.href=window.location.origin},onFileChange:function(e){e&&this.createImage(e)},createImage:function(e){var t=this,r=new FileReader;if(e.size<5e6){try{r.onload=function(r){t.article.image=r.target.result,t.article.imageFileName=e.name}}catch(e){this.errorMessage=e}r.readAsDataURL(e)}else this.image=""},removeImage:function(e){this.article.image="",this.$refs.imageInput.reset()}},head:function(){return{title:"Add Article"}}},n=r(28),c=r(37),o=r.n(c),d=r(378),h=r(272),m=r(360),v=r(365),f=r(366),w=r(175),x=r(282),_=r(367),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xl":""}},[r("v-form",{ref:"addArticleForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("p",[e._v("Date: "+e._s(e.article.date))]),e._v(" "),r("p",[e._v("Author: "+e._s(e.article.author))]),e._v(" "),r("v-file-input",{ref:"imageInput",attrs:{label:"Add Image for Thumbnail","show-size":"",rules:e.checkFile,accept:"image/*"},on:{change:e.onFileChange}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.article.image,expression:"article.image"}]},[r("v-btn",{attrs:{color:"error"},on:{click:e.removeImage}},[e._v("Remove File")]),e._v(" "),r("v-img",{attrs:{src:e.article.image,"aspect-ratio":"2.1"}})],1),e._v(" "),r("v-text-field",{attrs:{id:"id",name:"title",label:"Title",rules:e.titleLength},model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}}),e._v(" "),r("v-text-field",{attrs:{name:"description",label:"Description",rules:e.descLength},model:{value:e.article.description,callback:function(t){e.$set(e.article,"description",t)},expression:"article.description"}}),e._v(" "),r("v-textarea",{attrs:{name:"text",label:"Article Text",rules:e.required},model:{value:e.article.text,callback:function(t){e.$set(e.article,"text",t)},expression:"article.text"}})],1),e._v(" "),r("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:e.storeArticle}},[e._v("Add Article")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage.includes("exceeded the quota"),expression:"errorMessage.includes('exceeded the quota')"}]},[r("v-alert",{staticStyle:{position:"fixed",bottom:"1rem"},attrs:{type:"error",elevation:"5"}},[e._v("\n      File selected needs to be smaller than 5MB\n    ")])],1)],1)}),[],!1,null,"015b0fd7",null);t.default=component.exports;o()(component,{VAlert:d.a,VBtn:h.a,VContainer:m.a,VFileInput:v.a,VForm:f.a,VImg:w.a,VTextField:x.a,VTextarea:_.a})}}]);